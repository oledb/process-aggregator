# Todo

* [ ] Добавить автоматическое добавление через декораторы
  * [ ] декоратор `@Action`
  * [ ] декоратор `@Relation`
  * [ ] функцию `addActionsWithDecorators`
  * [ ] функцию `addRelationsWithDecorators`
* [ ] Рефакторинг методов IAction - переделать на поля
* [ ] Добавить в Action еще одино поле - update

# Терминология


* Процесс (Process) - набор связаннных шагов, по которым движется задача. Представляет из себя граф, привязан к коду. Все остальные сущности (команды, действия, связи, шаги) являются частью процесса. Для создания процесса необходим контекст. Зона ответственности - управлять взаимодействиями всех остальных частей.
* Контекст (Context) - глобальный класс, который отвечает за управления сервисами и за создание объектов. Зона ответственности - управление памятью путем создания и уничтожения объектов.
* Задача (Task) - конкретная задача, которая движется по процессу. Представляет собой объект JSON, хранится в БД. Одним из ключевых полей задачи является статус, который отражает на каком статусе в данный момент находится задача. Зона ответственности - хранить состояние.
* Шаг (Step) - часть процесса, представляет собой узел (node) в графе. Основное ключевое поле - статус. По нему Задача понимает, к какому шагу она привязана. Зона ответственности - взаимодействие со связями.
* Связь (Relation) - часть процесса, представляет собой грань (edge) графа. Связывает шаги друг с другом. Зона ответственности - определять возможность перехода на другие шаги через взаимодействие с действиями
* Вес связи (RelationWeight) - часть процесса, представляет собой вес (weight) ребра графа. Полезная вес связи качество за связи между шагами. Ключевое поле - команда. У одной полезной нагрузки может быть только одна команда. Зона ответственности - хранить состояние связи.
* Команда (Command) - часть веса связи, представляет собой строку. Благодаря командам можно понять, какое действие нужно вызывать для команды.
* Действие (Action) - класс, который отвечает за валидацию своего выполнения и за перевод задачи на другой шаг. Зона ответсвенности - перевод задачи на другой шаг путем взаимодействия с различными внешними источниками (базы данных, очереди, микросервисы).
* Хранищиле действий (Action) - создает из команды действие, которое процесс может выполнить. Находится в контексте.

# Описание REST API

* `POST /api/process/:process/tasks/payload` - передается payload, который создает задачу
* `GET /api/process/:process/tasks?q=...` - получения списка задач
* `GET /api/process/:process/tasks/:id` - возвращает задачу по id
* `PUT /api/process/:process/tasks/:id/payload` - обновляет существующую задачу
* `POST /api/process/:process/tasks/command/:command/` - запускает выполнение команды
